<h5 class="mb-3">{{ modal_title }}</h5>

<form 
  {% if cliente %}
    hx-post="/clientes/ui/{{ cliente.id_cliente }}/edit"
    hx-target="#lista-clientes"
    hx-swap="innerHTML"  {# Preserve container div so subsequent HTMX targets still exist #}
  {% else %}
    hx-post="/clientes/ui/novo" 
    hx-target="#lista-clientes" 
    hx-swap="innerHTML"  {# Replace only the inner cards; keeps row wrapper with id #}
  {% endif %}
>
  <div class="mb-3">
    <label for="tipo_pessoa" class="form-label">Tipo de Pessoa</label>
    <select class="form-select" name="tipo_pessoa" required>
      <option value="Física" {% if cliente and cliente.tipo_pessoa == 'Física' %}selected{% endif %}>
        Pessoa Física
      </option>
      <option value="Jurídica" {% if cliente and cliente.tipo_pessoa == 'Jurídica' %}selected{% endif %}>
        Pessoa Jurídica
      </option>
    </select>
  </div>

  <div class="mb-3">
    <label for="nome_completo" class="form-label">Nome Completo</label>
    <input type="text" class="form-control" name="nome_completo" value="{{ cliente.nome_completo if cliente else '' }}" required>
  </div>
  <div class="mb-3">
    <label for="cpf_cnpj" class="form-label">CPF / CNPJ</label>
    <input type="text" class="form-control" name="cpf_cnpj" value="{{ cliente.cpf_cnpj if cliente else '' }}" required>
  </div>
  <div class="mb-3">
    <label for="email" class="form-label">Email</label>
    <input type="email" class="form-control" name="email" value="{{ cliente.email if cliente else '' }}">
  </div>
  <div class="mb-3">
    <label for="telefone" class="form-label">Telefone</label>
    <input type="text" class="form-control" name="telefone" value="{{ cliente.telefone if cliente else '' }}">
  </div>
  <hr>
  <div class="d-flex justify-content-end">
    <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">Cancelar</button>
    <button type="submit" class="btn btn-primary">
      {% if cliente %}Salvar Alterações{% else %}Salvar Cliente{% endif %}
    </button>
  </div>
</form>